<div class="page">
  <header class="topbar">
    <button class="ghost" (click)="volver()">â† Volver a sorteos</button>
    <button class="ghost" *ngIf="sorteo() && profileSvc.profile().role==='admin'" (click)="irAAdmin()">Admin</button>
  </header>

  <section *ngIf="sorteo() as s" class="info">
    <h2 class="title">{{ s.name }}</h2>
    <div class="sub">Organizado por {{ s.organizer }} <span class="alias">(@{{ s.alias }})</span></div>
    <p class="desc">{{ s.description }}</p>
  </section>

  <section class="countdown">
    <div class="count-card">
      <div class="label">Tiempo restante para el sorteo</div>
      <app-countdown [targetIso]="sorteo()!.raffleDate"></app-countdown>
      <div class="when">Programado para: {{ sorteo()!.raffleDate | date:'long' }}</div>
    </div>
  </section>

  <section *ngIf="sorteo() as s" class="numbers">
    <app-number-grid [numbers]="s.numbers" (select)="seleccionarNumero($event)"></app-number-grid>
  </section>

  <app-purchase-modal
    [visible]="mostrarModal()"
    [number]="numeroSeleccionado()"
    [cargando]="cargandoPago()"
    [error]="errorPago()"
    (cancel)="cancelarModal()"
    (submit)="confirmarCompra($event)"
  ></app-purchase-modal>

  <div class="confetti" *ngIf="mostrarConfetti()">
    <span>ğŸ‰</span><span>âœ¨</span><span>ğŸŸ¢</span><span>â­</span><span>ğŸ’«</span>
  </div>
</div>
