<div class="page">
  <header class="page-header">
    <div class="head-text">
      <h2>Sorteos activos</h2>
      <p class="sub">Busca y participa en los sorteos disponibles</p>
    </div>

    <div class="search">
      <span class="icon">游댌</span>
      <input
        type="text"
        placeholder="Buscar por nombre u organizador"
        (input)="query.set($any($event.target).value)"
      />
    </div>
  </header>
  <div class="auth-cta" style="margin: 8px 0;">
    <button class="ghost" *ngIf="!isLoggedIn()" (click)="login()">Iniciar sesi칩n</button>
  </div>

  <div class="count" *ngIf="raffles().length > 0">
    {{ raffles().length }} sorteos encontrados
  </div>

  <div *ngIf="raffles().length === 0" class="empty">
    <h4>No encontramos sorteos activos</h4>
    <p *ngIf="!hasFetchError()">Cuando haya sorteos disponibles se mostrar치n aqu칤.</p>
    <p *ngIf="hasFetchError()">No se pudo obtener la lista de sorteos. Es posible que el servidor requiera autenticaci칩n. Puede <button class="ghost" (click)="login()">iniciar sesi칩n</button> para verlos.</p>
  </div>

  <div class="grid" *ngIf="raffles().length > 0">
    <app-raffle-card
      *ngFor="let r of raffles()"
      [raffle]="r"
    >
      <button class="primary" (click)="viewRaffle(r.id)">
        Ver sorteo
      </button>
    </app-raffle-card>
  </div>
</div>
