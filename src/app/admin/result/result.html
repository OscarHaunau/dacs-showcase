<div class="page">
  <header class="topbar">
    <button class="ghost" (click)="cancel()">← Volver</button>
    <h3>Publicar resultado</h3>
  </header>

  <section class="card">
    <form>
      <div class="grid">
        <label>Ganador
          <input type="number" [(ngModel)]="ganador" name="ganador" />
        </label>
        <label>Respaldo
          <input type="number" [(ngModel)]="respaldo" name="respaldo" />
        </label>
        <label>Fuente (nombre)
          <input [(ngModel)]="fuenteNombre" name="fuenteNombre" />
        </label>
        <label>Fuente (URL)
          <input [(ngModel)]="fuenteUrl" name="fuenteUrl" />
        </label>
      </div>
      <div class="actions">
        <button type="button" class="ghost" (click)="cancel()">Cancelar</button>
        <button type="button" class="primary" (click)="publish()" [disabled]="ganador===null">Publicar</button>
      </div>
    </form>
  </section>

  <section class="card" *ngIf="state.getResult(id) as r">
    <h4>Último resultado publicado</h4>
    <div>Ganador: <strong>{{ r.ganador }}</strong></div>
    <div *ngIf="r.respaldo !== undefined">Respaldo: <strong>{{ r.respaldo }}</strong></div>
    <div>Fecha: {{ r.fecha | date:'long' }}</div>
    <div *ngIf="r.fuenteNombre">Fuente: {{ r.fuenteNombre }}</div>
    <div *ngIf="r.fuenteUrl"><a class="ghost" [href]="r.fuenteUrl" target="_blank">Abrir fuente</a></div>
  </section>
</div>